# Simulator Global Settings
simulator:
  world_rate: 1000 # Hz
  control_rate: 100 # Hz
  sim_time: 30 # seconds
  coord_transform: "rotorpy_to_hm3d"

  additional_sensors:
    imu_1:
      type: "imu"
      model: "rotorpy"
      sampling_rate: 50 # Hz

  # Sensor sampling rates - how often sensors are rendered/sampled
  # Event camera accumulates at this rate, other sensors capture at this rate
  sensor_rates:
    imu_1: 50 # Hz
    event_camera_1: 1000 # Hz - high-frequency event accumulation
    color_camera_1: 20 # Hz
    depth_camera_1: 20 # Hz
    # navmesh_1: 10 # Hz

  # Visualization rates (optional) - how often to display sensor data
  # Must be <= sampling_rate for each sensor
  # If omitted, defaults to sampling_rate (display every sample)
  viz_rates:
    imu_1: 50 # Hz
    event_camera_1: 20 # Hz - visualize every 5th accumulation
    color_camera_1: 20 # Hz
    depth_camera_1: 20 # Hz
    # navmesh_1: 10 # Hz

# Visual Backend Settings
visual_backend:
  gpu_id: 0
  scene: "data/hm3d/00014-nYYcLpSzihC/nYYcLpSzihC.basis.glb"
  scene_dataset_config_file: "default"
  clear_color: [0.0, 0.0, 0.0, 1.0] # BLACK in RGBA (assuming mn.Color4.from_linear_rgb_int(0))
  default_agent: 0

  # navmesh_settings:
  # TODO: Move these to a navmesh handler settings section
  # TODO: to be more maintainable. Also get the agent radius
  # TODO: from the vehicle model.
  agent_height: 1.0
  agent_radius: 0.3
  agent_max_climb: 2.0
  agent_max_slope: 90.0

  enable_hbao: false
  frustum_culling: true

  seed: 326
  physics_config_file: "data/default.physics_config.json"
  enable_physics: true # Replace with false if `built_with_bullet` is False

  sensors:
    event_camera_1:
      type: "event"
      position: [0.0, 0.0, 0.05]
      orientation: [0.0, 0.0, 0.0]
      width: 640
      height: 480
      hfov: 90
      zfar: 1000.0
      backend: "cuda"
      contrast_threshold_neg: 0.15
      contrast_threshold_pos: 0.15
      anti_aliasing: 8

    color_camera_1:
      type: "color"
      position: [0.0, 0.0, 0.05]
      orientation: [0.0, 0.0, 0.0]
      width: 640
      height: 480
      hfov: 90
      zfar: 1000.0
      anti_aliasing: 8

    depth_camera_1:
      type: "depth"
      position: [0.0, 0.0, 0.05]
      orientation: [0.0, 0.0, 0.0]
      width: 640
      height: 480
      hfov: 90
      zfar: 1000.0

    # navmesh_1:
    #   type: "navmesh"
    #   meters_per_pixel: 0.1  # Higher resolution for better detail

# Controller settings
controller:
  model: "rotorpy_se3"
  vehicle: "crazyflie"

# Dynamics settings
dynamics:
  model: "rotorpy_multirotor_euler"
  vehicle: "crazyflie"

# Trajectory settings
trajectory:
  model: "habitat_random_minsnap"
  seed: 42
  target_length: 30.0
  min_waypoint_distance: 2.0
  max_waypoints: 100
  v_avg: 1.0
